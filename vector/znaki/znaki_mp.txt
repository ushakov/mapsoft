    Система рисования векторных карт

В основе этого стандарта - карты, которые мы рисовали для ММБ,

Стандарт рассчитан на "туристские" карты, в основном Подмосковные.
Впрочем, предполагается использовать его и для рисования карт и
хребтовок на горную местность.

Основная задача - красивые бумажные карты для ММБ. А основной формат, в
котором карты рисуются и хранятся - FIG 3.2. Кроме того, хочется, чтобы
эти карты можно было преобразовывать в "польский" формат и загружать в
картографические gps-приемники. 

К сожалению, на данный момент нет взаимно-однозначного преобразования
между mp- и fig-форматом. Пожалуй, единственное существенные препятствие 
тому -- необходимость управлять расположением надписей, закрывать объекты,
попадающие под надписи. В принципе, эти задачи могут быть решены.

Мы используем два разных fig-формата.

* "схематический fig" - формат, в котором стандарт знаков
оптимизирован для рисования.

* "fig для печати" - стандарт знаков оптимизирован для печати. 

Преобразование из первого формата во второй ("подготовка к печати")
призводится автоматически и необратимо.

Набор условных знаков:

<картинки>

На картинках указан набор условных знаков, которые мы
используем. Слева - в схематической версии, справа - в версии для печати.
соответствующие fig-файлы: <zn.fig> <zn1.fig>

Слева указан номер объекта в mp-формате и глубина объекта в fig-файле.

Объекты рисуются ломаными (впрочем при чтении и сплайны преобразуются к
ломаным), при подготовке версии для печати некоторые объекты (дороги,
горизонтали, реки) преобразуются в x-сплайны с небольшим скруглением
(параметр x-сплайна = 0.3). То есть, уголочки немного закругляются,
но в целом объект остается близким к исходной ломаной.

Площадные объекты


Растительность: Фон карты рисуется знаком 0x16 (зеленый), поверх
рисуются поля (0x52), поверх - вырубки и редколесья (0x4F, 0x50, 0x51),
поверх рисуются острова леса (0x15).

Для полевых карт можно в качестве фона использовать знак 0x52, лес,
редколесья и вырубки рисовать знаками (0x4F, 0x50, 0x51, 0x15)

Поля и леса не преобразуются в сплайны для печати - иначе на углах карты
могли бы возникать разные неожиданности.

Населенка: 

Озера: 

Проблема: остров только белый, и никакой лес на нем не нарисуешь. Как
с этим побороться, не усложняя сильно процесс рисования карты в xfig,
я не знаю. С другой стороны в реальности пока с такой проблемой я не
сталкивался.


POLYGON  0x04 закрытая территория
POLYGON  0x0E обычная населенка
POLYGON  0x15 остров леса 
POLYGON  0x1A кладбище
POLYGON  
POLYGON  0x29 водоем
POLYGON  0x4E дачи, сад.уч., д/о, п/л
POLYGON  0x4F свежая вырубка
POLYGON  0x50 заросшая вырубка
POLYGON  0x51 редколесье
POLYGON  0x52 поле
POLYGON  0x53 остров



POLYLINE 0x00  кривая надпись
POLYLINE 0x01  автомагистраль
POLYLINE 0x02  шоссе
POLYLINE 0x03  верхний край обрыва
POLYLINE 0x04  проезжий грейдер
POLYLINE 0x05  отдельные строения
POLYLINE 0x06  проезжая грунтовка
POLYLINE 0x07  непроезжий грейдер
POLYLINE 0x08  мост-1 (пешеходный)
POLYLINE 0x09  мост-3 (автомобильный)
POLYLINE 0x0A  непроезжая грунтовка
POLYLINE 0x0B  мост-7 (на автомагистралях)
POLYLINE 0x0C  ж/д станция
POLYLINE 0x0C  хребет
POLYLINE 0x15  ручей-1
POLYLINE 0x16  просека
POLYLINE 0x18  ручей-2
POLYLINE 0x1A  маленькая ЛЭП
POLYLINE 0x1B  пешеходный тоннель
POLYLINE 0x1C  просека широкая
POLYLINE 0x1D  граница областей
POLYLINE 0x1E  нижний край обрыва
POLYLINE 0x1F  ручей-5
POLYLINE 0x20  пунктирная горизонталь
POLYLINE 0x21  горизонтали, бергштрихи и штрихи обрывов
POLYLINE 0x22  жирная горизонталь
POLYLINE 0x23  контур леса
POLYLINE 0x24  болото
POLYLINE 0x25  овраг
POLYLINE 0x26  пунктирный ручей
POLYLINE 0x27  железная дорога
POLYLINE 0x28  газопровод
POLYLINE 0x29  ЛЭП
POLYLINE 0x2A  тропа 
POLYLINE 0x2B  сухая канава


POI 0x0700  крупный населенный пункт
POI 0x0900  мелкий населенный пункт
POI 0x0F00  триангуляционный знак
POI 0x1000  отметка уреза воды
POI 0x1100  отметка высоты
POI 0x2800  подпись лесного квартала, урочища
POI 0x2C04  памятник
POI 0x2C0B  церковь
POI 0x2F08  остановка автобуса
POI 0x5905  ж/д станция
POI 0x6403  кладбище
POI 0x6406  перевал
POI 0x6411  башня
POI 0x6414  родник
POI 0x6415  дом
POI 0x6508  водопад
POI 0x650E  порог
POI 0x6603  яма
POI 0x660F  охотничья вышка, кормушка и т.п.
POI 0x6613  курган
POI 0x6616  скала-останец

Точки населенных пунктов 0x0700 и 0x0900 - вспомогательные знаки.
При преобразовании fig->mp населенные пункты (многоугольники 0x0E,
имеющие названия) дублируются такими точками (если название только из
заглавных букв - то 0x0700). Точки показываются в мелком масштабе,
многоугольники в крупном. При преобразовании mp->fig эти точки не
используются!

Работа с надписями. 