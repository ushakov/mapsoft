Очередная система рисования карт.

Карты хранятся в директории maps
Конфигурация знаков - в файлах <style>.cnf


Программы:

./make_map_gk <map name> <scale, m/cm> <lon0> <x1> <x2> <y1> <y2>

-- Сделать заготовку карты с нужными параметрами.
   Проекция Г-К, СК Пулково-42

./update_map 

-- обновить карту из mp или fig-файла (не доделано)

./get_mp <map name>

./get_fig <map name>

./get_legend

./get_print_fig <map name>


============================================================
    Карты

Карты хранятся в виде fig-файлов в специальной директории и 
напрямую не редактируются. Имя файла - имя карты.

В карте могут содержаться следующие объекты:

* рабочие пометки, растровые исходники - все объекты с 
  глубинами <30 и >=200. Они никак не обрабатываются,
  при печати и при экспорте в mp отрезаются.
  (возможно, надо еще выделить диапазон глубин для сетки 
  (печатается полупрозрачным) и для печатаемых пометок 
  (вроде легенды))

* картографические объекты - объекты с глубинами [30:200),
  имеющие ключ (ключ появляется автоматически при 
  добавлении объекта в карту)

* подписи - объекты с глубинами [30:200), имеющие специальный
  ключ (который показывает, к какому объекту они относятся)


  



    Ключи

Каждый картографический объект имеет ключ такого вида:
<тип знака> <дата> <время> <id>@<map> [[<sid>@]source]

* тип объекта в формате mp + 0x100000 для линейных объектов,
  или + 0x200000 для площадных объектов
* дата вида 2007-12-03
* время вида 15:26:16
* id - уникальный номер объекта в карте
* map - название карты
* sid - уникальный номер объекта в источнике (нужен, чтобы 
  автоматически обновлять карту из к.-н. источника)
* source - название источника

В fig-объекте ключ записывается во второй строчке комментария 
(в первой строчке - название объекта)
В mp-объекте ключ записывается в первой строчке комментария.

Тип mp-объекта всегда определяется по его mp-типу,
а не по ключу
Тип fig-объекта может определяться как по ключу, так и по 
внешнему виду (глубина, цвет и т.п.) объекта в 
соответствии с конф.файлом.

Каждая подпись имеет ключ вида
+<id>@<map>

Все прочие объекты (те, которые не попадают в карту) должны 
иметь ключ
-

    Примеры ключей

0x000016 2007-12-03 15:26:16 1234@map1 11@map2
0x100016 2007-12-03 15:26:16 1232@map1 tonis
0x200016 2007-12-03 15:26:16 1235@map1
+1234@map1

============================================================
